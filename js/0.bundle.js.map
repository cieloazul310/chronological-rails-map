{"version":3,"file":"0.bundle.js","sources":["webpack:///./src/geolocation.js"],"sourcesContent":["import Geol from \"ol/geolocation\";\nimport Feature from \"ol/feature\";\nimport Style from \"ol/style/style\";\nimport Circle from \"ol/style/circle\";\nimport Fill from \"ol/style/fill\";\nimport Stroke from \"ol/style/stroke\"\nimport PointGeom from \"ol/geom/point\";\nimport VectorLayer from \"ol/layer/vector\";\nimport VectorSource from \"ol/source/vector\";\n\nexport default (state) => {\n\n    const geolocation = new Geol({\n      projection: state.getMap().getView().getProjection()\n    });\n\n    const positionFeature = new Feature();\n    positionFeature.setStyle([\n      new Style({\n        image: new Circle({\n          radius: 12,\n          fill: new Fill({\n            color: 'rgba(51, 181, 204, 0.4)'\n          })\n        })\n      }),\n      new Style({\n        image: new Circle({\n          radius: 6,\n          fill: new Fill({\n            color: '#3399CC'\n          }),\n          stroke: new Stroke({\n            color: '#fff',\n            width: 2\n          })\n        })\n      })\n    ]);\n\n    const menus = document.querySelector(\".menu-container ul.menus\");\n    const li = document.createElement(\"li\");\n    li.innerHTML = \"現在地を表示\";\n    li.addEventListener(\"click\", (evt) => {\n      if (!geolocation.getTracking()) {\n        geolocation.setTracking(true);\n        evt.target.classList.add(\"active\");\n      } else {\n        state.getMap().getView().setCenter(geolocation.getPosition());\n      }\n    });\n\n    menus.appendChild(li);\n\n    geolocation.once(\"change:position\", () => {\n      state.getMap().getView().setCenter(geolocation.getPosition());\n      state.getMap().getView().setZoom(Math.max(12, state.getMap().getView().getZoom()));\n      positionFeature.setGeometry(geolocation.getPosition() ?\n        new PointGeom(geolocation.getPosition()) : null);\n      new VectorLayer({\n        map: state.getMap(),\n        source: new VectorSource({\n          features: [positionFeature]\n        })\n      });\n    });\n\n    geolocation.on('change:position', () => {\n      positionFeature.setGeometry(geolocation.getPosition() ?\n        new PointGeom(geolocation.getPosition()) : null);\n    });\n\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/geolocation.js\n// module id = 237\n// module chunks = 0"],"mappings":"AAAA","sourceRoot":""}