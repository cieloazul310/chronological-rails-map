webpackJsonp([0],{237:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(238),a=n(r),o=i(240),s=n(o),u=i(80),h=n(u),l=i(82),c=n(l),d=i(67),f=n(d),g=i(66),p=n(g),_=i(65),y=n(_),v=i(131),E=n(v),m=i(241),C=n(m);e.default=function(t){var e=new a.default({projection:t.getMap().getView().getProjection()}),i=new s.default;i.setStyle([new h.default({image:new c.default({radius:12,fill:new f.default({color:"rgba(51, 181, 204, 0.4)"})})}),new h.default({image:new c.default({radius:6,fill:new f.default({color:"#3399CC"}),stroke:new p.default({color:"#fff",width:2})})})]);var n=document.querySelector(".menu-container ul.menus"),r=document.createElement("li");r.innerHTML="現在地を表示",r.addEventListener("click",function(i){e.getTracking()?t.getMap().getView().setCenter(e.getPosition()):(e.setTracking(!0),i.target.classList.add("active"))}),n.appendChild(r),e.once("change:position",function(){t.getMap().getView().setCenter(e.getPosition()),t.getMap().getView().setZoom(Math.max(12,t.getMap().getView().getZoom())),i.setGeometry(e.getPosition()?new y.default(e.getPosition()):null),new E.default({map:t.getMap(),source:new C.default({features:[i]})})}),e.on("change:position",function(){i.setGeometry(e.getPosition()?new y.default(e.getPosition()):null)})}},238:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(239),a=i(15),o=i(127),s=i(5),u=i(6),h=i(64),l=i(18),c=i(4),d=i(13),f=i(128),g=function(t){a.a.call(this);var e=t||{};this.position_=null,this.transform_=d.default.identityTransform,this.sphere_=new o.a(f.a.RADIUS),this.watchId_=void 0,s.a.listen(this,a.a.getChangeEventType(r.a.PROJECTION),this.handleProjectionChanged_,this),s.a.listen(this,a.a.getChangeEventType(r.a.TRACKING),this.handleTrackingChanged_,this),void 0!==e.projection&&this.setProjection(e.projection),void 0!==e.trackingOptions&&this.setTrackingOptions(e.trackingOptions),this.setTracking(void 0!==e.tracking&&e.tracking)};n.a.inherits(g,a.a),g.prototype.disposeInternal=function(){this.setTracking(!1),a.a.prototype.disposeInternal.call(this)},g.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=d.default.getTransformFromProjections(d.default.get("EPSG:4326"),t),this.position_&&this.set(r.a.POSITION,this.transform_(this.position_)))},g.prototype.handleTrackingChanged_=function(){if(l.a.GEOLOCATION){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},g.prototype.positionChange_=function(t){var e=t.coords;this.set(r.a.ACCURACY,e.accuracy),this.set(r.a.ALTITUDE,null===e.altitude?void 0:e.altitude),this.set(r.a.ALTITUDE_ACCURACY,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(r.a.HEADING,null===e.heading?void 0:c.a.toRadians(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var i=this.transform_(this.position_);this.set(r.a.POSITION,i),this.set(r.a.SPEED,null===e.speed?void 0:e.speed);var n=h.a.circular(this.sphere_,this.position_,e.accuracy);n.applyTransform(this.transform_),this.set(r.a.ACCURACY_GEOMETRY,n),this.changed()},g.prototype.positionError_=function(t){t.type=u.a.ERROR,this.setTracking(!1),this.dispatchEvent(t)},g.prototype.getAccuracy=function(){return this.get(r.a.ACCURACY)},g.prototype.getAccuracyGeometry=function(){return this.get(r.a.ACCURACY_GEOMETRY)||null},g.prototype.getAltitude=function(){return this.get(r.a.ALTITUDE)},g.prototype.getAltitudeAccuracy=function(){return this.get(r.a.ALTITUDE_ACCURACY)},g.prototype.getHeading=function(){return this.get(r.a.HEADING)},g.prototype.getPosition=function(){return this.get(r.a.POSITION)},g.prototype.getProjection=function(){return this.get(r.a.PROJECTION)},g.prototype.getSpeed=function(){return this.get(r.a.SPEED)},g.prototype.getTracking=function(){return this.get(r.a.TRACKING)},g.prototype.getTrackingOptions=function(){return this.get(r.a.TRACKING_OPTIONS)},g.prototype.setProjection=function(t){this.set(r.a.PROJECTION,d.default.get(t))},g.prototype.setTracking=function(t){this.set(r.a.TRACKING,t)},g.prototype.setTrackingOptions=function(t){this.set(r.a.TRACKING_OPTIONS,t)},e.default=g},239:function(t,e,i){"use strict";var n={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"};e.a=n},240:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(7),r=i(5),a=i(6),o=i(0),s=i(15),u=i(81),h=i(80),l=function(t){if(s.a.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,r.a.listen(this,s.a.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this),void 0!==t)if(t instanceof u.a||!t){var e=t;this.setGeometry(e)}else{var i=t;this.setProperties(i)}};o.a.inherits(l,s.a),l.prototype.clone=function(){var t=new l(this.getProperties());t.setGeometryName(this.getGeometryName());var e=this.getGeometry();e&&t.setGeometry(e.clone());var i=this.getStyle();return i&&t.setStyle(i),t},l.prototype.getGeometry=function(){return this.get(this.geometryName_)},l.prototype.getId=function(){return this.id_},l.prototype.getGeometryName=function(){return this.geometryName_},l.prototype.getStyle=function(){return this.style_},l.prototype.getStyleFunction=function(){return this.styleFunction_},l.prototype.handleGeometryChange_=function(){this.changed()},l.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(r.a.unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=r.a.listen(t,a.a.CHANGE,this.handleGeometryChange_,this)),this.changed()},l.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},l.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?l.createStyleFunction(t):void 0,this.changed()},l.prototype.setId=function(t){this.id_=t,this.changed()},l.prototype.setGeometryName=function(t){r.a.unlisten(this,s.a.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,r.a.listen(this,s.a.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},l.createStyleFunction=function(t){var e;if("function"==typeof t)e=2==t.length?function(e){return t(this,e)}:t;else{var i;Array.isArray(t)?i=t:(n.a.assert(t instanceof h.default,41),i=[t]),e=function(){return i}}return e},e.default=l},241:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(46),a=i(62),o=i(63),s=i(3),u=i(7),h=i(5),l=i(17),c=i(6),d=i(1),f=i(132),g=i(12),p=i(242),_=i(2),y=i(130),v=i(29),E=i(243),m=i(129),C=function(t){var e=t||{};y.a.call(this,{attributions:e.attributions,logo:e.logo,projection:void 0,state:v.a.READY,wrapX:void 0===e.wrapX||e.wrapX}),this.loader_=n.a.nullFunction,this.format_=e.format,this.overlaps_=void 0==e.overlaps||e.overlaps,this.url_=e.url,void 0!==e.loader?this.loader_=e.loader:void 0!==this.url_&&(u.a.assert(this.format_,7),this.loader_=f.a.xhr(this.url_,this.format_)),this.strategy_=void 0!==e.strategy?e.strategy:p.a.all;var i=void 0===e.useSpatialIndex||e.useSpatialIndex;this.featuresRtree_=i?new m.a:null,this.loadedExtentsRtree_=new m.a,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;var a,o;e.features instanceof r.a?(a=e.features,o=a.getArray()):Array.isArray(e.features)&&(o=e.features),i||void 0!==a||(a=new r.a(o)),void 0!==o&&this.addFeaturesInternal(o),void 0!==a&&this.bindFeaturesCollection_(a)};n.a.inherits(C,y.a),C.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},C.prototype.addFeatureInternal=function(t){var e=n.a.getUid(t).toString();if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var i=t.getGeometry();if(i){var r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new C.Event(E.a.ADDFEATURE,t))}},C.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[h.a.listen(e,c.a.CHANGE,this.handleFeatureChange_,this),h.a.listen(e,o.a.PROPERTYCHANGE,this.handleFeatureChange_,this)]},C.prototype.addToIndex_=function(t,e){var i=!0,n=e.getId();return void 0!==n?n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e:(u.a.assert(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e),i},C.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},C.prototype.addFeaturesInternal=function(t){var e,i,r,a,o=[],s=[],u=[];for(i=0,r=t.length;i<r;i++)a=t[i],e=n.a.getUid(a).toString(),this.addToIndex_(e,a)&&s.push(a);for(i=0,r=s.length;i<r;i++){a=s[i],e=n.a.getUid(a).toString(),this.setupChangeEvents_(e,a);var h=a.getGeometry();if(h){var l=h.getExtent();o.push(l),u.push(a)}else this.nullGeometryFeatures_[e]=a}for(this.featuresRtree_&&this.featuresRtree_.load(o,u),i=0,r=s.length;i<r;i++)this.dispatchEvent(new C.Event(E.a.ADDFEATURE,s[i]))},C.prototype.bindFeaturesCollection_=function(t){var e=!1;h.a.listen(this,E.a.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),h.a.listen(this,E.a.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),h.a.listen(t,a.a.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)},this),h.a.listen(t,a.a.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)},this),this.featuresCollection_=t},C.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(h.a.unlistenByKey)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(this.removeFeatureInternal,this);for(var i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var n=new C.Event(E.a.CLEAR);this.dispatchEvent(n),this.changed()},C.prototype.forEachFeature=function(t,e){return this.featuresRtree_?this.featuresRtree_.forEach(t,e):this.featuresCollection_?this.featuresCollection_.forEach(t,e):void 0},C.prototype.forEachFeatureAtCoordinateDirect=function(t,e,i){var n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,function(n){return n.getGeometry().intersectsCoordinate(t)?e.call(i,n):void 0})},C.prototype.forEachFeatureInExtent=function(t,e,i){return this.featuresRtree_?this.featuresRtree_.forEachInExtent(t,e,i):this.featuresCollection_?this.featuresCollection_.forEach(e,i):void 0},C.prototype.forEachFeatureIntersectingExtent=function(t,e,i){return this.forEachFeatureInExtent(t,function(n){if(n.getGeometry().intersectsExtent(t)){var r=e.call(i,n);if(r)return r}})},C.prototype.getFeaturesCollection=function(){return this.featuresCollection_},C.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),_.a.isEmpty(this.nullGeometryFeatures_)||s.a.extend(t,_.a.getValues(this.nullGeometryFeatures_))),t},C.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},C.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},C.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],n=t[1],r=null,a=[NaN,NaN],o=1/0,s=[-1/0,-1/0,1/0,1/0],u=e||g.a.TRUE;return this.featuresRtree_.forEachInExtent(s,function(t){if(u(t)){var e=t.getGeometry(),h=o;if((o=e.closestPointXY(i,n,a,o))<h){r=t;var l=Math.sqrt(o);s[0]=i-l,s[1]=n-l,s[2]=i+l,s[3]=n+l}}}),r},C.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},C.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},C.prototype.getFormat=function(){return this.format_},C.prototype.getOverlaps=function(){return this.overlaps_},C.prototype.getResolutions=function(){},C.prototype.getUrl=function(){return this.url_},C.prototype.handleFeatureChange_=function(t){var e=t.target,i=n.a.getUid(e).toString(),r=e.getGeometry();if(r){var a=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(a,e)):this.featuresRtree_&&this.featuresRtree_.update(a,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);var o=e.getId();if(void 0!==o){var s=o.toString();i in this.undefIdIndex_?(delete this.undefIdIndex_[i],this.idIndex_[s]=e):this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else i in this.undefIdIndex_||(this.removeFromIdIndex_(e),this.undefIdIndex_[i]=e);this.changed(),this.dispatchEvent(new C.Event(E.a.CHANGEFEATURE,e))},C.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&_.a.isEmpty(this.nullGeometryFeatures_)},C.prototype.loadFeatures=function(t,e,i){var n,r,a=this.loadedExtentsRtree_,o=this.strategy_(t,e);for(n=0,r=o.length;n<r;++n){var s=o[n];a.forEachInExtent(s,function(t){return d.a.containsExtent(t.extent,s)})||(this.loader_.call(this,s,e,i),a.insert(s,{extent:s.slice()}))}},C.prototype.removeFeature=function(t){var e=n.a.getUid(t).toString();e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},C.prototype.removeFeatureInternal=function(t){var e=n.a.getUid(t).toString();this.featureChangeKeys_[e].forEach(h.a.unlistenByKey),delete this.featureChangeKeys_[e];var i=t.getId();void 0!==i?delete this.idIndex_[i.toString()]:delete this.undefIdIndex_[e],this.dispatchEvent(new C.Event(E.a.REMOVEFEATURE,t))},C.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},C.Event=function(t,e){l.a.call(this,t),this.feature=e},n.a.inherits(C.Event,l.a),e.default=C},242:function(t,e,i){"use strict";var n={};n.all=function(t,e){return[[-1/0,-1/0,1/0,1/0]]},n.bbox=function(t,e){return[t]},n.tile=function(t){return function(e,i){var n=t.getZForResolution(i),r=t.getTileRangeForExtentAndZ(e,n),a=[],o=[n,0,0];for(o[1]=r.minX;o[1]<=r.maxX;++o[1])for(o[2]=r.minY;o[2]<=r.maxY;++o[2])a.push(t.getTileCoordExtent(o));return a}},e.a=n},243:function(t,e,i){"use strict";var n={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"};e.a=n}});